(()=>{var e={};e.id=405,e.ids=[405,888,660],e.modules={2773:(e,t,a)=>{"use strict";a.r(t),a.d(t,{config:()=>I,default:()=>P,getServerSideProps:()=>N,getStaticPaths:()=>k,getStaticProps:()=>w,reportWebVitals:()=>L,routeModule:()=>H,unstable_getServerProps:()=>$,unstable_getServerSideProps:()=>G,unstable_getStaticParams:()=>E,unstable_getStaticPaths:()=>z,unstable_getStaticProps:()=>T});var s={};a.r(s),a.d(s,{default:()=>Home});var r=a(7093),i=a(5244),n=a(1323),o=a(4482),l=a(4496),c=a(997),d=a(5577),u=a.n(d);let x=require("next/head");var p=a.n(x),h=a(9014);let CloseSidebarButton=({onClick:e})=>(0,c.jsxs)(c.Fragment,{children:[c.jsx("button",{className:"fixed top-[42px] left-[335px] z-50 h-7 w-7",onClick:e,children:c.jsx(h.Z,{})}),c.jsx("div",{onClick:e,className:"absolute top-0 left-0 z-10 w-full bg-black opacity-70 sm:hidden"})]}),SidebarButton=({text:e,icon:t,onClick:a,className:s})=>c.jsx("button",{className:`flex justify-between w-full cursor-pointer select-none items-center gap-3 rounded-md py-3 px-3 text-[14px] leading-3 text-white transition-colors duration-200 hover:bg-gray-500/10 ${s}`,onClick:a,children:(0,c.jsxs)("div",{className:"flex items-center gap-3",children:[t,c.jsx("span",{children:e})]})});var g=a(6689),m=a(3111);let LHS_SettingsButton=()=>{let[e,t]=(0,g.useState)(!1);return c.jsx("div",{className:"relative flex flex-col items center",children:c.jsx(SidebarButton,{text:"Settings",icon:c.jsx("div",{children:c.jsx(m.Z,{size:23})}),onClick:()=>{}})})};var f=a(9794);let LHS_Login=()=>c.jsx("div",{className:"relative flex flex-col items center",children:c.jsx(SidebarButton,{text:"Login",icon:c.jsx("div",{children:c.jsx(f.Z,{})}),onClick:()=>{}})});var j=a(9540);let v={url:"https://www.bungie.net/Platform",key:"ace1abe8389b458fa91b621887738eb2"};async function Fetch(){let e={method:"GET","x-api-key":v.key,authorization:"grant_type=authorization_code&code=45568"},t=await fetch(v.url+"/Destiny2/Manifest",e),a=await t.json();console.log(a)}async function GetCharacterInfo(){let e={method:"GET",headers:{"x-api-key":v.key},authorization:"grant_type=authorization_code&code=45568"},t=await fetch(v.url+"/Destiny2/3/Profile/4611686018484567966/?components=200",e),a=await t.json();return a.Response.characters.data}async function GetVerboseInformation(){let e={method:"GET",headers:{"x-api-key":v.key},authorization:"grant_type=authorization_code&code=45568"},t=await fetch(v.url+"/Destiny2/3/Profile/4611686018484567966/?components=205,201",e),a=await t.json();return console.log(a),a}async function GetItem(e){let t={method:"GET",headers:{"x-api-key":v.key},Authorization:"grant_type=authorization_code&code=45568"},a=await fetch(v.url+`/Destiny2/Manifest/DestinyInventoryItemDefinition/${e}/`,t),s=await a.json();return s.Response}let LHS_ReloadManifest=()=>c.jsx("div",{className:"relative flex flex-col items center",children:c.jsx(SidebarButton,{text:"Fetch Manifest",icon:c.jsx("div",{children:c.jsx(j.Z,{})}),onClick:()=>{Fetch()}})}),LHS_ReloadCharacters=()=>c.jsx("div",{className:"relative flex flex-col items center",children:c.jsx(SidebarButton,{text:"Reload Character Info",icon:c.jsx("div",{children:c.jsx(j.Z,{})})})}),SidebarImageButton=({text:e,race:t,light:a,image:s,onClick:r,className:i})=>(0,c.jsxs)("button",{className:`flex justify-between w-full cursor-pointer select-none items-center gap-3 rounded-md py-3 px-3 text-[14px] leading-3 text-white transition-colors duration-200 hover:bg-gray-500/10 ${i}`,onClick:r,style:{height:"64px",backgroundImage:`url(${s})`,backgroundSize:"314px 64px",marginTop:"20px"},children:[(0,c.jsxs)("div",{style:{marginLeft:"65px",textAlign:"center"},children:[c.jsx("div",{style:{fontWeight:"700"},children:e}),c.jsx("div",{style:{marginTop:"10px"},children:t})]}),(0,c.jsxs)("div",{style:{color:"#f0dc2e",fontSize:"19px",fontWeight:"700",marginRight:"4px"},children:["âœ§  ",a]})]}),b=(0,g.createContext)(void 0),y=(0,g.createContext)({characters:{},updateCharacters:()=>{}}),S=(0,g.createContext)(void 0),C=(0,g.createContext)({verbose:{},updateVerbose:()=>{}}),LhsSidebar=()=>{let{characters:e,updateCharacters:t}=(0,g.useContext)(y),{sidebarOpen:a,toggleSidebar:s}=(0,g.useContext)(b),{chosenCharacter:r,setChosenCharacter:i}=(0,g.useContext)(S),{verbose:n,updateVerbose:o}=(0,g.useContext)(C),[l,d]=(0,g.useState)(!1),characterInfo=()=>{GetCharacterInfo().then(e=>{t(e)}),GetVerboseInformation().then(e=>{o(e)})};(0,g.useEffect)(()=>{let fetchCharacterInfo=async()=>{let e=await GetCharacterInfo(),a=await GetVerboseInformation();t(e),o(a),d(!0)};l||fetchCharacterInfo()},[n,e,l]);let getEmblem=t=>"http://bungie.net"+e[t].emblemBackgroundPath,getClass=t=>{let a=e[t].classType;return"0"==a?"Titan":"1"==a?"Hunter":"Warlock"},getRace=t=>{let a=e[t].raceType;return"0"==a?"Human":"1"==a?"Awoken":"Exo"};return(0,c.jsxs)("div",{className:`fixed top-0 left-0 z-40 flex h-full w-[330px] flex-none flex-col space-y-2 p-2 duration-1000 sidebar ${a?"":"sidebar-closed"}`,children:[c.jsx(LHS_Login,{}),c.jsx("div",{className:"flex-grow flex-grow-1 overflow-auto",children:Object.keys(e).map((t,a)=>c.jsx(SidebarImageButton,{text:getClass(t),race:getRace(t),light:e[t].light,image:getEmblem(t),onClick:()=>i(t)},t))}),c.jsx("div",{onClick:()=>{characterInfo(),d(!1)},children:c.jsx(LHS_ReloadCharacters,{})}),c.jsx(LHS_ReloadManifest,{}),c.jsx(LHS_SettingsButton,{}),c.jsx(CloseSidebarButton,{onClick:()=>s(!a)})]})},CharacterInventory=()=>{let{chosenCharacter:e}=(0,g.useContext)(S),{characters:t,updateCharacters:a}=(0,g.useContext)(y),{verbose:s}=(0,g.useContext)(C),[r,i]=(0,g.useState)([]),[n,o]=(0,g.useState)([]),[l,d]=(0,g.useState)([]),[u,x]=(0,g.useState)(!0),[p,h]=(0,g.useState)(1);return((0,g.useEffect)(()=>{h(.25);let e=setTimeout(()=>h(1),250);return()=>clearTimeout(e)},[e]),(0,g.useEffect)(()=>{x(!0),console.log(s),s&&s.Response&&s.Response.characterEquipment.data[e]&&s.Response.characterEquipment.data[e].items&&(i(s.Response.characterEquipment.data[e].items),x(!1))},[s,e,t]),(0,g.useEffect)(()=>{let fetchItems=async()=>{if(r.length>0){let e=r.map(e=>GetItem(e.itemHash)),t=await Promise.all(e);o(t)}};fetchItems()},[r]),u)?c.jsx("div",{style:{paddingLeft:"45px",paddingTop:"30px",fontWeight:"700"},children:"Select a character"}):c.jsx("div",{className:"",style:{paddingLeft:"45px",paddingTop:"30px",fontWeight:"700",opacity:p,transition:"opacity 0.25s ease-out"},children:n.length>0?(0,c.jsxs)("div",{children:[(0,c.jsxs)("div",{style:{display:"flex"},children:[c.jsx("div",{children:c.jsx("img",{className:"gear-icon",src:`https://bungie.net${n[0].displayProperties.icon}`})}),c.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 60px)",gridGap:"2px",marginLeft:"14px"},children:Array(9).fill(0).map((e,t)=>c.jsx("img",{className:"gear-icon",src:`https://bungie.net${n[0].displayProperties.icon}`},t))})]}),c.jsx("img",{className:"gear-icon",src:`https://bungie.net${n[1].displayProperties.icon}`}),c.jsx("img",{className:"gear-icon",src:`https://bungie.net${n[2].displayProperties.icon}`}),c.jsx("img",{className:"gear-icon",src:`https://bungie.net${n[3].displayProperties.icon}`}),c.jsx("img",{className:"gear-icon",src:`https://bungie.net${n[4].displayProperties.icon}`}),c.jsx("img",{className:"gear-icon",src:`https://bungie.net${n[5].displayProperties.icon}`}),c.jsx("img",{className:"gear-icon",src:`https://bungie.net${n[6].displayProperties.icon}`}),c.jsx("img",{className:"gear-icon",src:`https://bungie.net${n[7].displayProperties.icon}`})]}):""})},Main_Page=()=>{let{sidebarOpen:e}=(0,g.useContext)(b);return c.jsx(c.Fragment,{children:c.jsx("div",{className:"",style:{backgroundColor:"#adaca6",height:"calc(100vh - 50px)"},children:c.jsx("div",{className:`transistion-all duration-1000 ${e?"pushed":""}`,style:{maxWidth:"100vh"},children:c.jsx(CharacterInventory,{})})})})},Navbar_Navbar=()=>{let{sidebarOpen:e}=(0,g.useContext)(b),{characters:t}=(0,g.useContext)(y),{chosenCharacter:a}=(0,g.useContext)(S),[s,r]=(0,g.useState)(!1);return c.jsx("div",{className:"top-0 z-20 navbar",children:(0,c.jsxs)("div",{className:`transition-all duration-1000 ${e?"pushed":""}`,style:{color:"white",fontSize:"17px",marginLeft:"10px",marginTop:"13px"},children:[c.jsx("div",{style:{fontWeight:"700"},children:"Lime Companion"}),""===a?"":(0,c.jsxs)("div",{style:{fontWeight:"700",marginLeft:"10px",marginTop:"0px",fontSize:"17px",color:"#406da8"},children:[1===t[a].classType&&"Hunter",0===t[a].classType&&"Titan",2===t[a].classType&&"Warlock"]})]})})},home=()=>{let[e,t]=(0,g.useState)(!0),[a,s]=(0,g.useState)([]),[r,i]=(0,g.useState)(""),[n,o]=(0,g.useState)([]);return(0,g.useEffect)(()=>{let fetchCharacters=async()=>{let e=await GetCharacterInfo();s(e)};fetchCharacters()},[]),(0,g.useEffect)(()=>{let fetchVerbose=async()=>{let e=await GetVerboseInformation();o(e)};fetchVerbose()},[]),c.jsx("div",{children:c.jsx(b.Provider,{value:{sidebarOpen:e,toggleSidebar:()=>t(!e)},children:c.jsx(y.Provider,{value:{characters:a,updateCharacters:s},children:c.jsx(S.Provider,{value:{chosenCharacter:r,setChosenCharacter:i},children:(0,c.jsxs)(C.Provider,{value:{verbose:n,updateVerbose:o},children:[c.jsx(LhsSidebar,{}),(0,c.jsxs)("div",{children:[c.jsx(Navbar_Navbar,{}),c.jsx(Main_Page,{})]})]})})})})})};function Home(){return(0,c.jsxs)("main",{className:`${u().className}`,children:[c.jsx(p(),{children:c.jsx("title",{children:"Lime Companion"})}),c.jsx(home,{})]})}let _=r.PagesRouteModule,P=(0,n.l)(s,"default"),w=(0,n.l)(s,"getStaticProps"),k=(0,n.l)(s,"getStaticPaths"),N=(0,n.l)(s,"getServerSideProps"),I=(0,n.l)(s,"config"),L=(0,n.l)(s,"reportWebVitals"),T=(0,n.l)(s,"unstable_getStaticProps"),z=(0,n.l)(s,"unstable_getStaticPaths"),E=(0,n.l)(s,"unstable_getStaticParams"),$=(0,n.l)(s,"unstable_getServerProps"),G=(0,n.l)(s,"unstable_getServerSideProps"),H=new _({definition:{kind:i.x.PAGES,page:"/index",pathname:"/",bundlePath:"",filename:""},components:{App:l.default,Document:o.default},userland:s})},4496:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>App});var s=a(997);function App({Component:e,pageProps:t}){return s.jsx(e,{...t})}a(6764)},4482:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>Document});var s=a(997),r=a(6859);function Document(){return(0,s.jsxs)(r.Html,{lang:"en",children:[s.jsx(r.Head,{}),(0,s.jsxs)("body",{children:[s.jsx(r.Main,{}),s.jsx(r.NextScript,{})]})]})}},6764:()=>{},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},580:e=>{"use strict";e.exports=require("prop-types")},6689:e=>{"use strict";e.exports=require("react")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},1017:e=>{"use strict";e.exports=require("path")}};var t=require("../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),a=t.X(0,[859,450,814],()=>__webpack_exec__(2773));module.exports=a})();